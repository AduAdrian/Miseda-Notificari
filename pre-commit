#!/bin/sh
# Pre-commit Hook - Auto Build React App
# RuleazÄƒ automat Ã®nainte de fiecare commit pentru a construi aplicaÈ›ia

echo "ğŸ”¨ Pre-commit: Building React app..."

# NavigheazÄƒ la directorul client
cd client || exit 1

# VerificÄƒ dacÄƒ existÄƒ node_modules
if [ ! -d "node_modules" ]; then
    echo "ğŸ“¦ Installing client dependencies..."
    npm install
fi

# RuleazÄƒ build-ul React
echo "âš™ï¸ Building React application..."
npm run build

# VerificÄƒ dacÄƒ build-ul a reuÈ™it
if [ $? -ne 0 ]; then
    echo "âŒ Build failed! Commit aborted."
    exit 1
fi

# VerificÄƒ dacÄƒ folder-ul build existÄƒ
if [ ! -d "build" ]; then
    echo "âŒ Build folder not created! Commit aborted."
    exit 1
fi

echo "âœ… React app built successfully!"

# AdaugÄƒ fiÈ™ierele de build la commit
git add build/

echo "ğŸ“¦ Build files added to commit!"
echo "ğŸ‰ Pre-commit hook completed successfully!"

exit 0